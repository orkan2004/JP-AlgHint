{
  "id": "UF_20250920_00007",
  "version": "1.0",
  "lang": "ja",
  "task_family": "union_find_connectivity",
  "answer_type": "lines",
  "task": "uf_connect",
  "statement_ja": "無向グラフ G(V,E) と Q 個の質問 (a,b) が与えられる。Union-Find を用いて、a と b が同じ連結成分かを判定せよ（同じなら 1、異なるなら 0）。",
  "io_spec": {
    "input": "n m Q\\n(u v)×m\\n(a b)×Q（すべて 1-indexed）",
    "output": "各クエリに対する 1/0（改行区切り）"
  },
  "instance": {
    "seed": 7,
    "template_id": "UF_T1",
    "params": {
      "n": 37
    }
  },
  "tests": [
    {
      "in": "37 50 80\n1 4\n1 16\n1 35\n1 37\n2 26\n3 22\n4 15\n4 22\n5 11\n5 19\n6 15\n6 17\n7 14\n7 33\n8 18\n8 25\n9 20\n9 24\n9 30\n9 32\n10 28\n10 34\n11 25\n11 36\n12 20\n13 16\n13 35\n14 30\n14 34\n16 17\n16 22\n16 27\n18 21\n18 23\n19 25\n19 36\n20 28\n21 26\n21 31\n22 29\n22 37\n23 25\n23 26\n24 28\n24 30\n25 26\n27 37\n28 30\n28 32\n32 33\n3 16\n1 22\n8 5\n21 25\n27 17\n25 2\n3 15\n34 10\n25 11\n34 10\n3 4\n17 3\n16 4\n28 14\n14 28\n28 34\n22 4\n37 27\n20 28\n6 17\n8 36\n32 33\n22 4\n16 17\n36 26\n35 16\n4 3\n11 31\n34 32\n3 13\n7 9\n20 10\n4 1\n23 5\n26 21\n19 26\n20 24\n20 9\n34 20\n7 24\n37 18\n2 20\n30 21\n35 10\n26 24\n33 6\n34 19\n8 16\n5 34\n28 21\n22 18\n10 8\n9 31\n6 33\n6 34\n32 2\n37 8\n29 26\n8 27\n8 33\n22 25\n26 35\n1 5\n1 11\n6 20\n35 24\n10 6\n5 3\n11 9\n28 21\n23 12\n25 10\n19 14\n14 22\n17 18\n36 3\n13 2\n34 37\n31 34\n30 5\n",
      "out": "1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n"
    },
    {
      "in": "37 64 47\n1 4\n1 6\n1 37\n2 8\n2 19\n2 31\n3 4\n3 6\n3 15\n3 22\n3 35\n4 13\n4 37\n5 19\n5 25\n5 31\n6 22\n6 27\n7 10\n7 24\n7 28\n7 33\n8 19\n8 21\n9 28\n9 32\n9 33\n10 20\n10 24\n10 30\n11 18\n11 21\n11 23\n12 20\n12 28\n13 15\n14 20\n14 24\n14 32\n14 34\n15 16\n15 17\n15 35\n15 37\n16 27\n17 22\n18 19\n18 21\n18 23\n18 25\n19 21\n19 26\n19 31\n20 30\n20 32\n22 29\n22 35\n22 37\n23 25\n24 34\n25 36\n26 36\n27 37\n29 37\n36 26\n16 27\n8 21\n29 35\n9 32\n14 28\n16 15\n35 16\n36 19\n24 34\n25 2\n16 15\n22 15\n24 32\n18 5\n28 32\n10 14\n11 21\n35 6\n16 15\n36 2\n18 36\n33 20\n6 16\n23 31\n20 32\n7 12\n20 14\n7 33\n23 18\n25 31\n26 2\n19 2\n33 34\n6 16\n35 17\n7 14\n15 26\n34 13\n20 18\n15 10\n24 27\n20 4\n21 15\n17 9\n31 30\n10 3\n",
      "out": "1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n"
    }
  ],
  "reference": {
    "py": "ref/py/uf_connect.py"
  },
  "hints": [
    {
      "level": 1,
      "text": "辺をすべて unite してから same(a,b) を判定する。"
    },
    {
      "level": 2,
      "text": "経路圧縮 + サイズ（またはランク）併合で高速化。"
    },
    {
      "level": 3,
      "text": "入力は 1-indexed。0-index と取り違えないこと。"
    }
  ],
  "distractors": [
    {
      "code": "NO_PATH_COMPRESSION",
      "desc": "経路圧縮なしで find が遅い"
    },
    {
      "code": "UNION_BY_RANK_BUG",
      "desc": "小を大にぶら下げる条件を逆にしてしまう"
    },
    {
      "code": "INDEX_BASE_MISMATCH",
      "desc": "1-indexed/0-indexed の取り違え"
    },
    {
      "code": "DELAY_UNION",
      "desc": "クエリ処理後に union してしまう順序ミス"
    }
  ],
  "witness": {
    "yes_count_t1": 40,
    "no_count_t1": 40,
    "yes_count_t2": 37,
    "no_count_t2": 10
  },
  "difficulty": {
    "score": 0.35,
    "basis": "DSU basics with path compression"
  },
  "tags": [
    "dsu",
    "graph",
    "beginner"
  ],
  "license": "CC BY-SA 4.0 (texts) / MIT (code)"
}