{
  "id": "UF_20250920_00023",
  "version": "1.0",
  "lang": "ja",
  "task_family": "union_find_connectivity",
  "answer_type": "lines",
  "task": "uf_connect",
  "statement_ja": "無向グラフ G(V,E) と Q 個の質問 (a,b) が与えられる。Union-Find を用いて、a と b が同じ連結成分かを判定せよ（同じなら 1、異なるなら 0）。",
  "io_spec": {
    "input": "n m Q\\n(u v)×m\\n(a b)×Q（すべて 1-indexed）",
    "output": "各クエリに対する 1/0（改行区切り）"
  },
  "instance": {
    "seed": 23,
    "template_id": "UF_T1",
    "params": {
      "n": 47
    }
  },
  "tests": [
    {
      "in": "47 66 64\n1 17\n2 6\n2 18\n2 35\n3 6\n3 19\n3 42\n3 46\n4 37\n4 41\n5 14\n5 16\n5 33\n5 39\n5 44\n5 45\n6 30\n7 19\n7 35\n8 13\n8 19\n9 15\n10 20\n10 33\n11 14\n11 15\n11 16\n11 33\n12 29\n12 41\n13 28\n14 24\n14 26\n14 33\n14 45\n16 45\n17 19\n17 35\n17 46\n18 19\n19 28\n19 32\n20 24\n21 36\n21 38\n21 40\n22 45\n23 27\n23 36\n23 41\n25 29\n25 38\n25 47\n27 43\n27 47\n28 32\n28 35\n28 42\n29 37\n29 38\n31 40\n33 34\n33 39\n36 41\n37 43\n38 41\n1 46\n40 36\n46 18\n8 46\n39 10\n37 31\n43 23\n10 24\n44 14\n12 29\n13 3\n25 41\n9 24\n10 24\n6 46\n40 43\n34 14\n15 5\n34 16\n33 44\n39 26\n41 38\n44 24\n10 39\n21 4\n2 42\n27 43\n39 10\n43 37\n14 44\n33 26\n35 3\n45 23\n47 46\n4 46\n7 27\n9 1\n7 47\n2 25\n12 16\n35 22\n8 16\n1 37\n26 27\n30 26\n38 33\n35 36\n40 34\n41 1\n33 18\n19 40\n21 20\n17 29\n30 47\n43 22\n6 21\n16 18\n30 25\n44 40\n26 32\n39 17\n43 26\n42 25\n21 18\n",
      "out": "1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n"
    },
    {
      "in": "47 85 59\n1 2\n1 28\n1 32\n2 3\n2 19\n2 30\n2 32\n3 19\n3 46\n4 21\n4 31\n5 33\n5 34\n5 44\n6 7\n6 46\n7 28\n7 32\n7 42\n8 17\n8 18\n8 30\n8 35\n9 11\n9 33\n9 39\n9 45\n10 11\n10 33\n10 39\n11 14\n11 15\n11 22\n11 33\n11 39\n12 38\n13 19\n13 42\n14 15\n15 26\n15 34\n16 26\n16 33\n17 18\n17 19\n17 46\n19 28\n19 30\n19 35\n20 22\n20 33\n20 34\n20 44\n21 29\n21 36\n21 40\n21 41\n22 34\n22 39\n23 38\n23 40\n24 33\n25 38\n25 43\n26 44\n27 38\n27 43\n27 47\n28 32\n28 42\n29 36\n29 37\n29 47\n31 37\n31 38\n33 39\n35 42\n36 40\n37 47\n38 40\n38 41\n38 43\n39 44\n41 43\n41 47\n5 33\n13 8\n25 21\n41 12\n34 9\n6 1\n16 9\n24 33\n1 42\n37 29\n12 31\n9 44\n1 17\n10 45\n2 18\n39 15\n45 16\n47 27\n36 41\n31 37\n40 25\n6 46\n35 42\n21 25\n2 30\n30 19\n14 10\n2 28\n37 29\n26 33\n26 22\n16 26\n14 16\n9 20\n41 21\n47 12\n44 22\n21 31\n14 22\n39 44\n10 16\n30 18\n28 18\n43 27\n12 29\n39 33\n17 3\n14 27\n13 36\n38 34\n25 20\n16 21\n34 31\n20 38\n39 32\n12 7\n22 21\n39 27\n19 33\n",
      "out": "1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n"
    }
  ],
  "reference": {
    "py": "ref/py/uf_connect.py"
  },
  "hints": [
    {
      "level": 1,
      "text": "辺をすべて unite してから same(a,b) を判定する。"
    },
    {
      "level": 2,
      "text": "経路圧縮 + サイズ（またはランク）併合で高速化。"
    },
    {
      "level": 3,
      "text": "入力は 1-indexed。0-index と取り違えないこと。"
    }
  ],
  "distractors": [
    {
      "code": "NO_PATH_COMPRESSION",
      "desc": "経路圧縮なしで find が遅い"
    },
    {
      "code": "UNION_BY_RANK_BUG",
      "desc": "小を大にぶら下げる条件を逆にしてしまう"
    },
    {
      "code": "INDEX_BASE_MISMATCH",
      "desc": "1-indexed/0-indexed の取り違え"
    },
    {
      "code": "DELAY_UNION",
      "desc": "クエリ処理後に union してしまう順序ミス"
    }
  ],
  "witness": {
    "yes_count_t1": 32,
    "no_count_t1": 32,
    "yes_count_t2": 47,
    "no_count_t2": 12
  },
  "difficulty": {
    "score": 0.35,
    "basis": "DSU basics with path compression"
  },
  "tags": [
    "dsu",
    "graph",
    "beginner"
  ],
  "license": "CC BY-SA 4.0 (texts) / MIT (code)"
}