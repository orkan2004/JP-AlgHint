{
  "id": "UF_20250920_00014",
  "version": "1.0",
  "lang": "ja",
  "task_family": "union_find_connectivity",
  "answer_type": "lines",
  "task": "uf_connect",
  "statement_ja": "無向グラフ G(V,E) と Q 個の質問 (a,b) が与えられる。Union-Find を用いて、a と b が同じ連結成分かを判定せよ（同じなら 1、異なるなら 0）。",
  "io_spec": {
    "input": "n m Q\\n(u v)×m\\n(a b)×Q（すべて 1-indexed）",
    "output": "各クエリに対する 1/0（改行区切り）"
  },
  "instance": {
    "seed": 14,
    "template_id": "UF_T1",
    "params": {
      "n": 45
    }
  },
  "tests": [
    {
      "in": "45 56 43\n1 5\n1 30\n1 34\n1 45\n2 7\n2 12\n2 26\n3 23\n4 36\n4 40\n5 18\n5 44\n6 34\n7 12\n7 19\n7 26\n8 21\n8 23\n8 29\n9 26\n10 11\n10 22\n10 43\n11 15\n11 38\n12 26\n13 22\n14 20\n14 23\n14 25\n15 22\n15 40\n15 43\n16 35\n17 19\n17 35\n18 45\n19 33\n20 24\n20 25\n23 28\n25 28\n25 37\n26 35\n26 41\n27 44\n30 42\n31 32\n31 42\n31 44\n32 34\n34 42\n34 45\n36 38\n39 43\n42 45\n23 37\n34 6\n20 14\n10 36\n9 12\n36 43\n25 28\n39 10\n4 13\n8 3\n18 34\n34 31\n13 11\n12 7\n19 16\n17 9\n24 14\n5 31\n41 9\n34 27\n25 14\n5 2\n9 43\n3 36\n25 5\n2 22\n38 14\n3 39\n34 19\n17 10\n12 37\n26 22\n6 25\n25 41\n14 7\n43 25\n38 8\n28 17\n43 37\n25 36\n17 25\n38 9\n6 37\n",
      "out": "1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n"
    },
    {
      "in": "45 79 33\n1 18\n1 27\n1 30\n1 34\n1 42\n2 7\n2 17\n2 33\n2 41\n3 21\n3 23\n4 36\n5 27\n5 30\n5 32\n5 45\n6 27\n6 32\n7 9\n7 26\n7 41\n8 14\n8 23\n8 24\n8 28\n9 12\n9 17\n9 26\n10 13\n10 22\n10 43\n11 15\n11 36\n11 43\n12 19\n12 35\n13 15\n13 36\n13 40\n14 20\n14 23\n14 25\n15 22\n15 39\n15 43\n16 41\n17 33\n17 35\n18 32\n18 34\n18 45\n19 26\n20 23\n20 28\n21 25\n22 36\n22 39\n22 40\n23 24\n23 29\n23 37\n25 28\n25 37\n26 33\n27 44\n28 37\n30 32\n30 34\n31 34\n31 44\n32 34\n32 42\n32 44\n33 35\n34 42\n35 41\n36 39\n38 39\n38 40\n30 5\n27 45\n29 24\n25 14\n8 29\n14 29\n34 44\n3 25\n13 4\n9 16\n20 24\n25 21\n41 17\n29 23\n30 6\n42 18\n28 8\n9 16\n28 25\n32 31\n27 18\n7 9\n28 21\n42 30\n25 29\n31 1\n43 21\n24 45\n31 12\n32 39\n42 17\n23 12\n36 27\n",
      "out": "1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n0\n0\n0\n0\n0\n0\n0\n"
    }
  ],
  "reference": {
    "py": "ref/py/uf_connect.py"
  },
  "hints": [
    {
      "level": 1,
      "text": "辺をすべて unite してから same(a,b) を判定する。"
    },
    {
      "level": 2,
      "text": "経路圧縮 + サイズ（またはランク）併合で高速化。"
    },
    {
      "level": 3,
      "text": "入力は 1-indexed。0-index と取り違えないこと。"
    }
  ],
  "distractors": [
    {
      "code": "NO_PATH_COMPRESSION",
      "desc": "経路圧縮なしで find が遅い"
    },
    {
      "code": "UNION_BY_RANK_BUG",
      "desc": "小を大にぶら下げる条件を逆にしてしまう"
    },
    {
      "code": "INDEX_BASE_MISMATCH",
      "desc": "1-indexed/0-indexed の取り違え"
    },
    {
      "code": "DELAY_UNION",
      "desc": "クエリ処理後に union してしまう順序ミス"
    }
  ],
  "witness": {
    "yes_count_t1": 21,
    "no_count_t1": 22,
    "yes_count_t2": 26,
    "no_count_t2": 7
  },
  "difficulty": {
    "score": 0.35,
    "basis": "DSU basics with path compression"
  },
  "tags": [
    "dsu",
    "graph",
    "beginner"
  ],
  "license": "CC BY-SA 4.0 (texts) / MIT (code)"
}